{% extends "base.html" %}
{% block title %}Мой блог{% endblock %}
{% block content %}
<h1>Мой блог</h1>
<div class="blog-actions">
    <a href="{% url 'post_create' %}" class="action-button action-button-primary">Создать новый пост</a>
</div>
<div class="blog-container">
{% if posts %}
  {% for post in posts %}
    <div class="post-card">
        <h2>{{ post.title }}</h2>
        <div class="post-date">
            {{ post.created_at|date:"d.m.Y H:i" }}
            {% if post.updated_at != post.created_at %}
                (обновлено: {{ post.updated_at|date:"d.m.Y H:i" }})
            {% endif %}
        </div>
        <div class="post-content">{{ post.content|linebreaks }}</div>
        <button class="toggle-btn">Развернуть</button>
        <div class="post-actions">
            <a href="{% url 'post_edit' post.id %}" class="action-button action-button-secondary">Редактировать</a>
            <a href="{% url 'post_delete' post.id %}" class="action-button action-button-danger" onclick="return confirm('Вы уверены, что хотите удалить этот пост?');">Удалить</a>
        </div>
    </div>
  {% endfor %}
{% else %}
  <p class="empty-message">Пока нет ни одного поста. Создайте свой первый пост!</p>
{% endif %}
</div>
{% endblock %}
