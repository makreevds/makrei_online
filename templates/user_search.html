{% extends "base.html" %}
{% block title %}–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π{% endblock %}
{% block content %}
<h1>–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h1>
<div class="search-container">
    <form method="get" action="{% url 'user_search' %}" class="search-form">
        <div class="search-form-wrapper">
            <input 
                type="text" 
                name="q" 
                value="{{ query }}" 
                placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, email –∏–ª–∏ –∏–º—è..." 
                class="search-input"
            >
            <button type="submit" class="action-button action-button-primary">–ü–æ–∏—Å–∫</button>
        </div>
    </form>
    
    {% if query %}
        {% if users %}
            <div class="search-results">
                <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ ({{ users.count }}):</h2>
                <div class="search-results-list">
                    {% for user in users %}
                        <div class="user-card">
                            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
                                <div>
                                    <h3>
                                        <a href="{% url 'user_posts' user.username %}">
                                            {{ user.username }}
                                        </a>
                                    </h3>
                                    {% if user.first_name or user.last_name %}
                                        <p>
                                            {{ user.get_full_name|default:"" }}
                                        </p>
                                    {% endif %}
                                    {% if user.email %}
                                        <p>
                                            üìß {{ user.email }}
                                        </p>
                                    {% endif %}
                                </div>
                                <div>
                                    <a href="{% url 'user_posts' user.username %}" class="action-button action-button-primary">
                                        –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å—Ç—ã
                                    </a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% else %}
            <p class="empty-message">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É "{{ query }}"</p>
        {% endif %}
    {% else %}
        <p class="empty-message">–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
    {% endif %}
</div>
{% endblock %}

